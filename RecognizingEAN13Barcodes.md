_Jon A. Webb, Ph.D._

# Why EAN-13 Barcodes? #

There are a number of different barcode formats, including some that are specifically designed to be read with a camera (instead of a linear scanning device). Although EAN-13 (which includes UPC) barcodes are designed to be read with a linear scanner, EAN-13 barcode recognition using a cellphone camera is interesting because these barcodes are the most common object designed to be read by any image sensor. They are the barcodes found on packaging which are used to identify products for retail sale. A successful EAN-13 barcode reader would make it possible to link information in the real world (products) to information in the virtual world (web sites discussing products, price databases, etc.) This is not true for other barcodes.

That said, there are significant problems with trying to read EAN-13 barcodes with a cellphone camera, resulting from the fact that an EAN-13 barcode is one-dimensional. All the information contained in the barcode is arranged horizontally. This makes the horizontal density of the information quite high. A camera records information with similar density horizontally and vertically. There is not a good match between the barcode and the sensor we are using. In practical terms, this means that the barcode must be in good focus in order to be read, and must be close enough to the camera to cover a significant portion of the image. This is not always easy to achieve with a cellphone camera.

Two-dimensional barcodes are designed to address this problem by spreading the information out both horizontally and vertically. However, two-dimensional barcodes are far less common than EAN-13 barcodes. Moreover, we learn more from trying to recognize a more difficult object than a simpler one.

# Imaging requirements for EAN-13 barcodes #

There are many good descriptions of EAN-13 barcodes available on the web. In summary, an EAN-13 barcode consists of two blocks of six digits each. (One more digit is encoded using the parity of the first block, making thirteen digits in all and giving the name.) Each digit is encoded using seven vertical bars of equal width, which we will call “elementary bars”. The elementary bars are either white or black. A digit code is always arranged into four groups of the same color. For example, one code for the digit 0 is “0001101”, where 1 stands for black and 0 for white. This code consists of an elementary black bar, followed by an elementary white bar, followed by a black bar the width of two elementary bars, followed by a white bar the width of three elementary bars. An example is shown below:

![http://jjil.googlecode.com/files/EAN13Barcode.jpg](http://jjil.googlecode.com/files/EAN13Barcode.jpg)

The two groups of six digits are separated by a middle pattern consisting of five elementary bars of alternating color, and the barcode begins with a start pattern and ends with and end pattern, each consisting of three bars of alternating color. Thus, there are 3 + 6\*7 + 5 + 6\*7 + 3 = 95 elementary bars in an EAN-13 barcode. Examining the digit encodings shows that a shift of as little as two elementary bars can transform one digit’s code into another’s. For example, one encoding of the digit 1 is “0011001”, which can be transformed into “0001101”, the encoding for 0 given above, by changing the third 1 to 0 and the fifth 0 to 1. This means every one of the elementary bars must be detected, and gives us a lower bound on the number of pixels an EAN-13 barcode must extend over for correct recognition: with perfect focus and no loss of resolution due to image coding, it must extend over at least 95 pixels. In practice, because focus is not perfect and cellphone cameras commonly compress an image before making it available for processing, the resolution must be at least two to three times that, i.e., over two to three hundred pixels in width.

Cellphone camera resolutions currently vary from VGA (640x480) to UXGA (1600x1200). For a VGA cellphone camera to take an acceptable image of an EAN-13 barcode the barcode must fill almost half its field of view. This is impractical for most cellphones without changes to the camera’s optics, because cellphone cameras are designed to be in focus at a few feet, allowing a good capture of a face. An EAN-13 barcode would have to be only a few inches away from a typical cellphone camera to fill at least half the field of view, and would be well out of focus.

With cameras with horizontal resolution at least 1280, i.e., SXGA (1280x1024) or better, however, the situation is different. With a high resolution camera the barcode need only fill less than a quarter of the field of view of the camera. This is a practical requirement with current cellphones, especially those with autofocus.

See [HowBarcodeRecognitionWorks](HowBarcodeRecognitionWorks.md) for a top-level description of the overall algorithm.